<!--文章内容渲染-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="ZFWosBKU9zZc1nug8xxt4ho13-BaVoYV0SkmWdXjyyw" />
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <!-- 引入本地的 Lightbox2 CSS 文件 -->
    <script src="/js/log_layout.js"></script>
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI"/>
    <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=0">
    <!--    <meta name="viewport" content="width=device-width, initial-scale=1">-->
    <meta name="description" content="Code_Life_Love">
    <title>Mysql常用Sql语句 [小姬炖蘑菇]</title>
    
        <meta name="author" content="小姬炖蘑菇">
    
    
        <link rel="icon" href="/image/favicon.ico">
    
    <meta name="keyword" content="">
    
<link rel="stylesheet" href="/css/style.css">

    
<link rel="stylesheet" href="/css/header.css">

<!--    https://github.com/stevenjoezhang/live2d-widget-->
<!--    <script src="https://fastly.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/autoload.js"></script>-->
<meta name="generator" content="Hexo 7.0.0"></head>


<article>
    <div class="post-container">
        <header class="post-header">
            <h1 class="post-title" id="top">Mysql常用Sql语句</h1>
            <div class="post-meta">
                <time>2023-03-15</time>
                <span>
                    <span class="post-author">
                        <span class="post-author-name">小姬炖蘑菇</span>
                    </span>
                </span>
            </div>
        </header>
        <div class="post-content"><h1 id="Mysql常用Sql语句"><a href="#Mysql常用Sql语句" class="headerlink" title="Mysql常用Sql语句"></a>Mysql常用Sql语句</h1><h2 id="1-数据库管理"><a href="#1-数据库管理" class="headerlink" title="1. 数据库管理"></a>1. 数据库管理</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">-- 查看所有数据库</span><br><span class="line">SHOW DATABASES;</span><br><span class="line"></span><br><span class="line">-- 进入/切换数据库</span><br><span class="line">USE mydb;</span><br><span class="line"></span><br><span class="line">-- 查看当前数据库</span><br><span class="line">SELECT DATABASE();</span><br><span class="line"></span><br><span class="line">-- 创建数据库</span><br><span class="line">CREATE DATABASE [IF NOT EXISTS] mydb;</span><br><span class="line">CREATE DATABASE [IF NOT EXISTS] mydb CHARACTER SET utf8mb4;</span><br><span class="line"></span><br><span class="line">-- 删除数据库</span><br><span class="line">DROP DATABASE [IF EXISTS] mydb;</span><br><span class="line"></span><br><span class="line">-- 查看数据库选项信息</span><br><span class="line">SHOW CREATE DATABASE mydb;</span><br><span class="line"></span><br><span class="line">-- 修改数据库选项信息</span><br><span class="line">ALTER DATABASE mydb CHARACTER SET utf8;</span><br></pre></td></tr></table></figure>

<h2 id="2-表管理"><a href="#2-表管理" class="headerlink" title="2. 表管理"></a>2. 表管理</h2><ul>
<li><p>表属性</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>含义</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>CHARSET</td>
<td>字符集</td>
<td>默认使用数据库字符集</td>
</tr>
<tr>
<td>ENGINE</td>
<td>存储引擎</td>
<td>默认为 InnoDB</td>
</tr>
<tr>
<td>DATA DIRECTORY</td>
<td>数据文件目录</td>
<td></td>
</tr>
<tr>
<td>INDEX DIRECTORY</td>
<td>索引文件目录</td>
<td></td>
</tr>
<tr>
<td>COMMENT</td>
<td>表注释</td>
<td></td>
</tr>
</tbody></table>
</li>
</ul>
<p><em>如果表标记为 TEMPORARY 则为临时表，在连接断开时表会消失。</em></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `bsi_problem_info` (</span><br><span class="line">  projectId <span class="type">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;项目ID&#x27;</span></span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 COMMENT<span class="operator">=</span><span class="string">&#x27;问题信息表&#x27;</span>;</span><br></pre></td></tr></table></figure>



<ul>
<li><strong>列属性</strong></li>
</ul>
<table>
<thead>
<tr>
<th>属性</th>
<th>含义</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>PRIMARY KEY</td>
<td>主键</td>
<td>标识记录的字段。可以为字段组合，不能为空且不能重复。</td>
</tr>
<tr>
<td>INDEX</td>
<td>普通索引</td>
<td>可以为字段组合，建立普通索引。</td>
</tr>
<tr>
<td>UNIQUE</td>
<td>唯一索引</td>
<td>可以为字段组合，不能重复，建立唯一索引。</td>
</tr>
<tr>
<td>NOT NULL</td>
<td>非空</td>
<td>（推荐）不允许字段值为空。</td>
</tr>
<tr>
<td>DEFAULT</td>
<td>默认值</td>
<td>设置当前字段的默认值。</td>
</tr>
<tr>
<td>AUTO_INCREMENT</td>
<td>自动增长</td>
<td>字段无需赋值，从指定值（默认 1）开始自动增长。表内只能存在一个且必须为索引。</td>
</tr>
<tr>
<td>COMMENT</td>
<td>注释</td>
<td>字段备注信息。</td>
</tr>
<tr>
<td>FOREIGN KEY</td>
<td>外键</td>
<td>该字段关联到其他表的主键。默认建立普通索引。</td>
</tr>
</tbody></table>
<h2 id="3-表操作"><a href="#3-表操作" class="headerlink" title="3. 表操作"></a>3. 表操作</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">-- 查看所有表</span><br><span class="line">mysql&gt; SHOW TABLES;</span><br><span class="line"></span><br><span class="line">-- 创建表</span><br><span class="line">mysql&gt; CREATE [TEMPORARY] TABLE [IF NOT EXISTS] student</span><br><span class="line">       (</span><br><span class="line">           id INT(8) PRIMARY KEY AUTO_INCREMENT=1,</span><br><span class="line">           name VARCHAR(50) NOT NULL,</span><br><span class="line">           sex INT COMMENT &#x27;Male 1，Female 0&#x27;,</span><br><span class="line">       )ENGINE=InnoDB;</span><br><span class="line"></span><br><span class="line">-- 删除表</span><br><span class="line">mysql&gt; DROP TABLE [IF EXISTS] student;</span><br><span class="line"></span><br><span class="line">-- 清空表数据（直接删除表，再重新创建）</span><br><span class="line">mysql&gt; TRUNCATE [TABLE] student;</span><br><span class="line"></span><br><span class="line">-- 查看表索引</span><br><span class="line">mysql&gt; show index from table</span><br><span class="line"></span><br><span class="line">-- 添加表索引</span><br><span class="line">mysql&gt; create index index_name on t_dept(name);</span><br><span class="line">mysql&gt; alter table t_dept add index index_name(name);</span><br><span class="line"></span><br><span class="line">-- 删除表索引</span><br><span class="line">mysql&gt;drop index index_name on table_name;</span><br><span class="line">mysql&gt;alter table table_name drop index index_name;</span><br><span class="line"></span><br><span class="line">-- 查看表结构</span><br><span class="line">mysql&gt; SHOW CREATE TABLE student;</span><br><span class="line">mysql&gt; DESC student;</span><br><span class="line"></span><br><span class="line">-- 修改表属性</span><br><span class="line">mysql&gt; ALTER TABLE student ENGINE=MYISAM;</span><br><span class="line"></span><br><span class="line">-- 重命名表</span><br><span class="line">mysql&gt; RENAME TABLE student TO new_student;</span><br><span class="line">mysql&gt; RENAME TABLE student TO mydb.new_student;      </span><br><span class="line"></span><br><span class="line">-- 复制表</span><br><span class="line">mysql&gt; CREATE TABLE new_student LIKE student;                  -- 复制表结构</span><br><span class="line">mysql&gt; CREATE TABLE new_student [AS] SELECT * FROM student;    -- 复制表结构和数据</span><br><span class="line"></span><br><span class="line">-- 复制表结构</span><br><span class="line">CREATE TABLE 新表名 AS SELECT * FROM 原表名 WHERE 1=2;</span><br><span class="line"></span><br><span class="line">-- 复制表数据</span><br><span class="line">INSERT INTO 新表名 SELECT * FROM 原表名;</span><br><span class="line"></span><br><span class="line">-- 检查表是否有错误</span><br><span class="line">mysql&gt; CHECK TABLE tbl_name [, tbl_name] ... [option] ...</span><br><span class="line">-- 优化表</span><br><span class="line">mysql&gt; OPTIMIZE [LOCAL | NO_WRITE_TO_BINLOG] TABLE tbl_name [, tbl_name] ...</span><br><span class="line">-- 修复表</span><br><span class="line">mysql&gt; REPAIR [LOCAL | NO_WRITE_TO_BINLOG] TABLE tbl_name [, tbl_name] ... [QUICK] [EXTENDED] [USE_FRM]</span><br><span class="line">-- 分析表</span><br><span class="line">mysql&gt; ANALYZE [LOCAL | NO_WRITE_TO_BINLOG] TABLE tbl_name [, tbl_name] ...</span><br></pre></td></tr></table></figure>

<h2 id="4-操作数据"><a href="#4-操作数据" class="headerlink" title="4.操作数据"></a>4.操作数据</h2><h3 id="增删改查"><a href="#增删改查" class="headerlink" title="增删改查"></a>增删改查</h3><p><strong>插入数据</strong>，如果已有主键值则插入数据失败。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">INSERT</span> <span class="keyword">INTO</span> student</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> (ID,name,grade)</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">VALUES</span>(<span class="number">755</span>,<span class="string">&#x27;netjic&#x27;</span>,<span class="number">80</span>);</span><br></pre></td></tr></table></figure>

<p><strong>插入并替换数据</strong>，如果已有主键值则先删除再插入。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> REPLACE <span class="keyword">INTO</span> student</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> (ID,name,grade)</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">VALUES</span>(<span class="number">755</span>,<span class="string">&#x27;netjic&#x27;</span>,<span class="number">80</span>);</span><br></pre></td></tr></table></figure>

<p><strong>更新数据</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">UPDATE</span> student</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">SET</span> name<span class="operator">=</span><span class="string">&#x27;netjic&#x27;</span>,grade<span class="operator">=</span><span class="number">60</span></span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">WHERE</span> id<span class="operator">=</span><span class="number">753</span>;</span><br></pre></td></tr></table></figure>

<p><strong>删除数据</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">DELETE</span> <span class="keyword">FROM</span> student</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">WHERE</span> id<span class="operator">=</span><span class="number">754</span>;</span><br></pre></td></tr></table></figure>

<p><strong>查询数据</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> id,name <span class="keyword">FROM</span> student               <span class="comment">-- 按条件查询数据</span></span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">WHERE</span> id <span class="keyword">BETWEEN</span> <span class="number">753</span> <span class="keyword">and</span> <span class="number">755</span>;</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student;                    <span class="comment">-- 查询全部数据</span></span><br></pre></td></tr></table></figure>

<h4 id="条件语句"><a href="#条件语句" class="headerlink" title="条件语句"></a>条件语句</h4><ul>
<li>DISTINCT 关键字用于对查询结果去重，必须放于所有字段前。只有多个字段全部相等才会被去重。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> DINTINCE age,sex <span class="keyword">FROM</span> student;     <span class="comment">-- 查询数据并去重</span></span><br></pre></td></tr></table></figure>

<ul>
<li>WHERE 语句用于指定 更新&#x2F;删除&#x2F;查询 的操作范围，如果不设定范围将对全部数据进行操作。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> id <span class="operator">!=</span> <span class="number">100</span>;</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> id [<span class="keyword">NOT</span>] <span class="keyword">BETWEEN</span> <span class="number">30</span> <span class="keyword">AND</span> <span class="number">50</span>;</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> id [<span class="keyword">NOT</span>] <span class="keyword">IN</span> (<span class="number">30</span>, <span class="number">35</span> ,<span class="number">50</span>);</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> grade <span class="keyword">IS</span> [<span class="keyword">NOT</span>] <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>LIKE 语句用于对字符串进行模糊匹配：<code>%</code>代表任意多个字符 <code>_</code>代表一个字符 <code>/</code>代表转义</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> name <span class="keyword">LIKE</span> <span class="string">&#x27;Tom%&#x27;</span>;</span><br></pre></td></tr></table></figure>


<h3 id="分组排序"><a href="#分组排序" class="headerlink" title="分组排序"></a>分组排序</h3><h4 id="数据分组"><a href="#数据分组" class="headerlink" title="数据分组"></a>数据分组</h4><table>
<thead>
<tr>
<th>分组函数</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>count</td>
<td>个数</td>
</tr>
<tr>
<td>sum</td>
<td>总和</td>
</tr>
<tr>
<td>max</td>
<td>最大值</td>
</tr>
<tr>
<td>min</td>
<td>最小值</td>
</tr>
<tr>
<td>avg</td>
<td>求平均值</td>
</tr>
<tr>
<td>group_concat</td>
<td>组内字符串拼接</td>
</tr>
</tbody></table>
<ol>
<li>GROUP 语句指定数据的分组方式，如果不含则默认把全部数据合并为一条数据。（本质是生成临时表）</li>
<li>AS 关键字为表或者列起别名，可省略。</li>
<li>HAVING 语句对分组后的结果进行筛选。</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询班级总数</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> class;                    <span class="comment">-- 全部合并</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询各年级人数</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> grade, <span class="built_in">SUM</span>(class.student_num) <span class="keyword">AS</span> nums </span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">FROM</span> class </span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> grade                                 <span class="comment">-- 各班数据按年级合并</span></span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">HAVING</span> <span class="built_in">SUM</span>(class.student_num) <span class="operator">&gt;</span> <span class="number">200</span>;           <span class="comment">-- 筛选人数大于 200 的年级</span></span><br></pre></td></tr></table></figure>

<h4 id="数据排序"><a href="#数据排序" class="headerlink" title="数据排序"></a>数据排序</h4><ul>
<li>ORDER 语句指定数据显示顺序，ASC 为升序 &#x2F; DESC 为降序。</li>
<li>LIMIT 语句对排序后的数据进行筛选，指定起始序号和总数量。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询学生信息</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> </span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">FROM</span> student </span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> grade <span class="keyword">DESC</span>, ID <span class="keyword">ASC</span>                   <span class="comment">-- 按成绩降序排列，若相同按学号升序排列</span></span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> LIMIT <span class="number">10</span>,<span class="number">20</span>;                                  <span class="comment">-- 筛选第 11 - 30 名</span></span><br></pre></td></tr></table></figure>


<h3 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h3><h4 id="嵌套查询"><a href="#嵌套查询" class="headerlink" title="嵌套查询"></a>嵌套查询</h4><ol>
<li>FROM 型：子语句返回一个表，且必须给子查询结果取别名。</li>
<li>WHERE 型：子语句返回一个值，不能用于 UPDATE。</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- FROM 型</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> </span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">FROM</span> (<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tb <span class="keyword">WHERE</span> id <span class="operator">&gt;</span> <span class="number">0</span>) <span class="keyword">AS</span> subfrom </span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">WHERE</span> id <span class="operator">&gt;</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- WHERE 型</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> </span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">FROM</span> tb</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">WHERE</span> money <span class="operator">=</span> (<span class="keyword">SELECT</span> <span class="built_in">max</span>(money) <span class="keyword">FROM</span> tb);</span><br></pre></td></tr></table></figure>


<h4 id="合并查询"><a href="#合并查询" class="headerlink" title="合并查询"></a>合并查询</h4><ol>
<li>默认为 DISTINCT 形式，不同表查询到的相同数据只展示一个。</li>
<li>设置为 ALL 则不同表查询到的相同结果重复展示。</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- DISTINCT 形式</span></span><br><span class="line">mysql<span class="operator">&gt;</span> (<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> id <span class="operator">&lt;</span> <span class="number">10</span>) </span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">UNION</span></span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> (<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> id <span class="operator">&gt;</span> <span class="number">20</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ALL 形式</span></span><br><span class="line">mysql<span class="operator">&gt;</span> (<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student1) </span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">UNION</span> <span class="keyword">ALL</span> </span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> (<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student2);</span><br></pre></td></tr></table></figure>

<h4 id="连表查询"><a href="#连表查询" class="headerlink" title="连表查询"></a>连表查询</h4><ul>
<li><strong>内连接 INNER JOIN</strong>：（默认）未指定连接条件时，自动查找相同字段名匹配连接条件。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> s.id,s.name,c.name</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">FROM</span> student s <span class="keyword">JOIN</span> class c</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">ON</span> e.cid <span class="operator">=</span> c.id;</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> </span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">FROM</span> student s, class c </span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">WHERE</span> s.id <span class="operator">=</span> c.id; </span><br></pre></td></tr></table></figure>

<ul>
<li><strong>交叉连接 CROSS JOIN</strong>：未指定连接条件时，视为无连接条件。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">FROM</span> boy <span class="keyword">CROSS</span> <span class="keyword">JOIN</span> girl;                 <span class="comment">-- 显示所有交配可能</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">FROM</span> boy, girl;                               <span class="comment">-- 等价写法</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>外连接 OUTER JOIN</strong>：如果数据不存在，也会出现在连接结果中。</p>
<ul>
<li><strong>LEFT JOIN</strong>：左表数据一定显示，没有匹配右表数据用 null 填充。</li>
<li><strong>RIGHT JOIN</strong>：右表数据一定显示，没有匹配左表数据用 null 填充。</li>
<li><strong>FULL JOIN</strong>：两表数据一定显示，没有匹配数据用 null 填充。</li>
</ul>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> s.id,s.name,c.name                   <span class="comment">-- 显示学生的班级信息</span></span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">FROM</span> student s <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> class c            <span class="comment">-- 没有班级的学生也会显示</span></span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">ON</span> s.cid <span class="operator">=</span> c.id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 先筛选再连接（效率等价，但如果有大量重复值提前筛选可以提高效率）</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> s.id,s.name,c.name    </span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">FROM</span> student s <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> (<span class="keyword">SELECT</span> DINTINCT id, name <span class="keyword">FROM</span> class) c       </span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">ON</span> s.cid <span class="operator">=</span> c.id;</span><br></pre></td></tr></table></figure>

</div>
    </div>
</article>
<nav class="post-nav">
  
    <a class="post-nav-item post-nav-prev" href="/2023/03/15/Mysql/Mysql%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5/">
      <div class="box">

        <div class="nav-arrow">&lt;&nbsp;上一篇</div>
        <span class="post-title">
          Mysql常用语句
        </span>
      </div>

    </a>

    
      
        <a class="post-nav-item post-nav-next" href="/2023/03/15/Mysql/Mysql%E7%B4%A2%E5%BC%95/">
          <div class="box">
            <div class="nav-arrow">下一篇&nbsp;&gt;</div>
            <span class="post-title">
              Mysql索引
            </span>
          </div>
        </a>
        
</nav>
<div class="footer-container">
    <div class="content">
        <div class="ye">
        </div>
        <div class="year">龙年大吉</div>
        <div class="text">让那指针慢慢走</div>
        <div class="copyright">Copyright@2024小姬炖蘑菇</div>
        <!-- <div class="link"><span>友链</span>
            <div class="link-name">
                <router-link to="/jnz">Jnz</router-link>
            </div>
        </div> -->
        <div class="plug">
            <a href="/html/链接/index.html">链接</a>
            <!-- <a href="/html/json格式化/index.html">json格式化｜</a>
            <a href="/html/时间戳/index.html">时间戳｜</a>
            <a href="/html/文件内容比对/index.html">文件内容比对｜</a> -->
        </div>
        <!-- <div class="view">
            本站总访问量<span id="busuanzi_value_site_pv"></span>次
            本站访客数<span id="busuanzi_value_site_uv"></span>人次
            本文总阅读量<span id="busuanzi_value_page_pv"></span>次
        </div> -->
    </div>
</div>

<div class="go-top-container">

    <div class="box">
        <a href="#top">
            <div class="box-top">
            </div>

        </a>

        <a href="/#Mysql常用Sql语句">
            <div class="box-index">
            </div>
        </a>

    </div>
</div>

